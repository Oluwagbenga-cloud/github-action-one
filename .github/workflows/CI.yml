name: Gbenga's Continuous Integration #workflow name

on: #define the events that trigger the workflow
  workflow_dispatch: #manual trigger
  push: #trigger on push to main branch
    branches: [main]
  pull_request:
    branches: [main]

env: #define environment variables
  REGISTRY: ghcr.io/$GITHUB_REPOSITORY
  IMAGE_NAME: $REGISTRY/gbenga-portfolio:latest
  IMAGE_NAME_VERSIONED: $REGISTRY/gbenga-portfolio:${{ github.sha }}
  JOB_NAME: CI_BUILD_JOB
  BUILD_NUMBER: 001
  FILE: ./app.json
  FILE2: ./app.py
  FILE3: ./requirements.txt

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      # - name: list the variables
      #   run: printenv #debugging step to list env variables
      - name: Verify environment setup
        run: |
          echo "JOB_NAME: $JOB_NAME"
          echo "BUILD_NUMBER: $BUILD_NUMBER"
          echo "IMAGE_NAME: $IMAGE_NAME"
          echo "IMAGE_NAME_VERSIONED: $IMAGE_NAME_VERSIONED"
          echo "Registry and secrets are configured (values masked for security)"
